!function(e){e.fn.jflickrfeed=function(i,a){var t,c=(i=e.extend(!0,{flickrbase:"//api.flickr.com/services/feeds/",feedapi:"photos_public.gne",limit:20,qstrings:{lang:"en-us",format:"json",jsoncallback:"?"},cleanDescription:!0,useTemplate:!0,itemTemplate:"",itemCallback:function(){}},i)).flickrbase+i.feedapi+"?",n=!0;for(t in i.qstrings)n||(c+="&"),c+=t+"="+i.qstrings[t],n=!1;return e(this).each((function(){var t=e(this),n=this;e.getJSON(c,(function(c){e.each(c.items,(function(e,a){if(e<i.limit){if(i.cleanDescription){var c=/<p>(.*?)<\/p>/g,m=a.description;c.test(m)&&(a.description=m.match(c)[2],null!=a.description&&(a.description=a.description.replace("<p>","").replace("</p>","")))}if(a.image_s=a.media.m.replace("_m","_s"),a.image_t=a.media.m.replace("_m","_t"),a.image_m=a.media.m.replace("_m","_m"),a.image=a.media.m.replace("_m",""),a.image_b=a.media.m.replace("_m","_b"),delete a.media,i.useTemplate){var l;c=i.itemTemplate;for(l in a)c=c.replace(RegExp("{{"+l+"}}","g"),a[l]);t.append(c)}i.itemCallback.call(n,a)}})),e.isFunction(a)&&a.call(n,c)}))}))}}(jQuery);